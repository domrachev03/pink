<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" sizes="16x16" type="image/png" href="_static/favicon-16x16.png">
    <link rel="icon" sizes="32x32" type="image/png" href="_static/favicon-32x32.png">
    <link rel="apple-touch-icon" sizes="180x180" type="image/png" href="_static/apple-touch-icon-180x180.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Barriers &mdash; pink 2.1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="_static/custom.css?v=05680a5a" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=20623aea"></script>
        <script src="_static/doctools.js?v=9a2dae69"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
        <script async="async" src="_static/mathjax/tex-chtml.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Inverse kinematics" href="inverse-kinematics.html" />
    <link rel="prev" title="Limits" href="limits.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            pink
          </a>
              <div class="version">
                2.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="tasks.html">Tasks</a></li>
<li class="toctree-l1"><a class="reference internal" href="limits.html">Limits</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Barriers</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#pink.barriers.Barrier"><code class="docutils literal notranslate"><span class="pre">Barrier</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#pink.barriers.Barrier.dim"><code class="docutils literal notranslate"><span class="pre">Barrier.dim</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#pink.barriers.Barrier.gain"><code class="docutils literal notranslate"><span class="pre">Barrier.gain</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#pink.barriers.Barrier.class_k_fn"><code class="docutils literal notranslate"><span class="pre">Barrier.class_k_fn</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#pink.barriers.Barrier.safe_policy"><code class="docutils literal notranslate"><span class="pre">Barrier.safe_policy</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#pink.barriers.Barrier.r"><code class="docutils literal notranslate"><span class="pre">Barrier.r</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#pink.barriers.Barrier.compute_barrier"><code class="docutils literal notranslate"><span class="pre">Barrier.compute_barrier()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#pink.barriers.Barrier.compute_jacobian"><code class="docutils literal notranslate"><span class="pre">Barrier.compute_jacobian()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#pink.barriers.Barrier.compute_qp_inequality"><code class="docutils literal notranslate"><span class="pre">Barrier.compute_qp_inequality()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#pink.barriers.Barrier.compute_qp_objective"><code class="docutils literal notranslate"><span class="pre">Barrier.compute_qp_objective()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#pink.barriers.Barrier.compute_safe_policy"><code class="docutils literal notranslate"><span class="pre">Barrier.compute_safe_policy()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#pink.barriers.BodySphericalBarrier"><code class="docutils literal notranslate"><span class="pre">BodySphericalBarrier</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#pink.barriers.BodySphericalBarrier.frames"><code class="docutils literal notranslate"><span class="pre">BodySphericalBarrier.frames</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#pink.barriers.BodySphericalBarrier.d_min"><code class="docutils literal notranslate"><span class="pre">BodySphericalBarrier.d_min</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#pink.barriers.BodySphericalBarrier.compute_barrier"><code class="docutils literal notranslate"><span class="pre">BodySphericalBarrier.compute_barrier()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#pink.barriers.BodySphericalBarrier.compute_jacobian"><code class="docutils literal notranslate"><span class="pre">BodySphericalBarrier.compute_jacobian()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#pink.barriers.ConfigurationBarrier"><code class="docutils literal notranslate"><span class="pre">ConfigurationBarrier</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#pink.barriers.ConfigurationBarrier.indices"><code class="docutils literal notranslate"><span class="pre">ConfigurationBarrier.indices</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#pink.barriers.ConfigurationBarrier.model"><code class="docutils literal notranslate"><span class="pre">ConfigurationBarrier.model</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#pink.barriers.ConfigurationBarrier.joints"><code class="docutils literal notranslate"><span class="pre">ConfigurationBarrier.joints</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#pink.barriers.ConfigurationBarrier.projection_matrix"><code class="docutils literal notranslate"><span class="pre">ConfigurationBarrier.projection_matrix</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#pink.barriers.ConfigurationBarrier.compute_barrier"><code class="docutils literal notranslate"><span class="pre">ConfigurationBarrier.compute_barrier()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#pink.barriers.ConfigurationBarrier.compute_jacobian"><code class="docutils literal notranslate"><span class="pre">ConfigurationBarrier.compute_jacobian()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#pink.barriers.PositionBarrier"><code class="docutils literal notranslate"><span class="pre">PositionBarrier</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#pink.barriers.PositionBarrier.frame"><code class="docutils literal notranslate"><span class="pre">PositionBarrier.frame</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#pink.barriers.PositionBarrier.indices"><code class="docutils literal notranslate"><span class="pre">PositionBarrier.indices</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#pink.barriers.PositionBarrier.p_min"><code class="docutils literal notranslate"><span class="pre">PositionBarrier.p_min</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#pink.barriers.PositionBarrier.p_max"><code class="docutils literal notranslate"><span class="pre">PositionBarrier.p_max</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#pink.barriers.PositionBarrier.compute_barrier"><code class="docutils literal notranslate"><span class="pre">PositionBarrier.compute_barrier()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#pink.barriers.PositionBarrier.compute_jacobian"><code class="docutils literal notranslate"><span class="pre">PositionBarrier.compute_jacobian()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-pink.barriers.position_barrier">Position Barrier</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#pink.barriers.position_barrier.PositionBarrier"><code class="docutils literal notranslate"><span class="pre">PositionBarrier</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#pink.barriers.position_barrier.PositionBarrier.frame"><code class="docutils literal notranslate"><span class="pre">PositionBarrier.frame</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pink.barriers.position_barrier.PositionBarrier.indices"><code class="docutils literal notranslate"><span class="pre">PositionBarrier.indices</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pink.barriers.position_barrier.PositionBarrier.p_min"><code class="docutils literal notranslate"><span class="pre">PositionBarrier.p_min</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pink.barriers.position_barrier.PositionBarrier.p_max"><code class="docutils literal notranslate"><span class="pre">PositionBarrier.p_max</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pink.barriers.position_barrier.PositionBarrier.compute_barrier"><code class="docutils literal notranslate"><span class="pre">PositionBarrier.compute_barrier()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pink.barriers.position_barrier.PositionBarrier.compute_jacobian"><code class="docutils literal notranslate"><span class="pre">PositionBarrier.compute_jacobian()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-pink.barriers.configuration_barrier">Configuration Barrier</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#pink.barriers.configuration_barrier.ConfigurationBarrier"><code class="docutils literal notranslate"><span class="pre">ConfigurationBarrier</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#pink.barriers.configuration_barrier.ConfigurationBarrier.indices"><code class="docutils literal notranslate"><span class="pre">ConfigurationBarrier.indices</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pink.barriers.configuration_barrier.ConfigurationBarrier.model"><code class="docutils literal notranslate"><span class="pre">ConfigurationBarrier.model</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pink.barriers.configuration_barrier.ConfigurationBarrier.joints"><code class="docutils literal notranslate"><span class="pre">ConfigurationBarrier.joints</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pink.barriers.configuration_barrier.ConfigurationBarrier.projection_matrix"><code class="docutils literal notranslate"><span class="pre">ConfigurationBarrier.projection_matrix</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pink.barriers.configuration_barrier.ConfigurationBarrier.compute_barrier"><code class="docutils literal notranslate"><span class="pre">ConfigurationBarrier.compute_barrier()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pink.barriers.configuration_barrier.ConfigurationBarrier.compute_jacobian"><code class="docutils literal notranslate"><span class="pre">ConfigurationBarrier.compute_jacobian()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-pink.barriers.body_spherical_barrier">Spherical Collision-Avoidance Barrier</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#pink.barriers.body_spherical_barrier.BodySphericalBarrier"><code class="docutils literal notranslate"><span class="pre">BodySphericalBarrier</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#pink.barriers.body_spherical_barrier.BodySphericalBarrier.frames"><code class="docutils literal notranslate"><span class="pre">BodySphericalBarrier.frames</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pink.barriers.body_spherical_barrier.BodySphericalBarrier.d_min"><code class="docutils literal notranslate"><span class="pre">BodySphericalBarrier.d_min</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pink.barriers.body_spherical_barrier.BodySphericalBarrier.compute_barrier"><code class="docutils literal notranslate"><span class="pre">BodySphericalBarrier.compute_barrier()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pink.barriers.body_spherical_barrier.BodySphericalBarrier.compute_jacobian"><code class="docutils literal notranslate"><span class="pre">BodySphericalBarrier.compute_jacobian()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="inverse-kinematics.html">Inverse kinematics</a></li>
<li class="toctree-l1"><a class="reference internal" href="developer-notes.html">Developer notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="references.html">References</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">pink</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Barriers</li>
      <li class="wy-breadcrumbs-aside">
              <!-- User defined GitHub URL -->
              <a href="https://github.com/stephane-caron/pink/tree/main/doc/barriers.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="barriers">
<span id="id1"></span><h1>Barriers<a class="headerlink" href="#barriers" title="Link to this heading"></a></h1>
<p id="module-pink.barriers">Control Barrier Functions.</p>
<dl class="py class">
<dt class="sig sig-object py" id="pink.barriers.Barrier">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pink.barriers.</span></span><span class="sig-name descname"><span class="pre">Barrier</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dim</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gain</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">class_k_fn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">r</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3.0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pink.barriers.Barrier" title="Link to this definition"></a></dt>
<dd><p>Abstract base class for barrier.</p>
<p>A barrier is a function <span class="math notranslate nohighlight">\(\boldsymbol{h}(\boldsymbol{q})\)</span> that
satisfies the following condition:</p>
<div class="math notranslate nohighlight">
\[\frac{\partial \boldsymbol{h}_j}{\partial \boldsymbol{q}}
\dot{\boldsymbol{q}} +\alpha_j(\boldsymbol{h}_j(\boldsymbol{q}))
\geq 0, \quad \forall j\]</div>
<p>where <span class="math notranslate nohighlight">\(\frac{\partial \boldsymbol{h}_j}{\partial \boldsymbol{q}}\)</span>
are the Jacobians of the constraint functions, <span class="math notranslate nohighlight">\(\dot{\boldsymbol{q}}\)</span>
is the joint velocity vector, and <span class="math notranslate nohighlight">\(\alpha_j\)</span> are extended
class K functions.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="pink.barriers.Barrier.dim">
<span class="sig-name descname"><span class="pre">dim</span></span><a class="headerlink" href="#pink.barriers.Barrier.dim" title="Link to this definition"></a></dt>
<dd><p>Dimension of the barrier.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pink.barriers.Barrier.gain">
<span class="sig-name descname"><span class="pre">gain</span></span><a class="headerlink" href="#pink.barriers.Barrier.gain" title="Link to this definition"></a></dt>
<dd><p>barrier gain.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pink.barriers.Barrier.class_k_fn">
<span class="sig-name descname"><span class="pre">class_k_fn</span></span><a class="headerlink" href="#pink.barriers.Barrier.class_k_fn" title="Link to this definition"></a></dt>
<dd><p>Extended class K function.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pink.barriers.Barrier.safe_policy">
<span class="sig-name descname"><span class="pre">safe_policy</span></span><a class="headerlink" href="#pink.barriers.Barrier.safe_policy" title="Link to this definition"></a></dt>
<dd><p>Safe backup control policy.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pink.barriers.Barrier.r">
<span class="sig-name descname"><span class="pre">r</span></span><a class="headerlink" href="#pink.barriers.Barrier.r" title="Link to this definition"></a></dt>
<dd><p>Weighting factor for the safe backup policy regularization term.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pink.barriers.Barrier.compute_barrier">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">compute_barrier</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">configuration</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pink.barriers.Barrier.compute_barrier" title="Link to this definition"></a></dt>
<dd><p>Compute the value of the barrier function.</p>
<p>The barrier function <span class="math notranslate nohighlight">\(\boldsymbol{h}(\boldsymbol{q})\)</span>
is a vector-valued function that represents the safety constraints.
It should be designed such that the set
<span class="math notranslate nohighlight">\(\{\boldsymbol{q} : \boldsymbol{h}(\boldsymbol{q}) \geq \boldsymbol{0}\}\)</span>
represents the safe region of the configuration space.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>configuration</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference internal" href="introduction.html#pink.configuration.Configuration" title="pink.configuration.Configuration"><code class="xref py py-class docutils literal notranslate"><span class="pre">Configuration</span></code></a></span>) – Robot configuration <span class="math notranslate nohighlight">\(\boldsymbol{q}\)</span>.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></a></span></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Value of the barrier function <span class="math notranslate nohighlight">\(\boldsymbol{h}(\boldsymbol{q})\)</span>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pink.barriers.Barrier.compute_jacobian">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">compute_jacobian</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">configuration</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pink.barriers.Barrier.compute_jacobian" title="Link to this definition"></a></dt>
<dd><p>Compute the Jacobian matrix of the barrier function.</p>
<p>The Jacobian matrix
<span class="math notranslate nohighlight">\(\frac{\partial \boldsymbol{h}}{\partial \boldsymbol{q}}(\boldsymbol{q})\)</span>
of the barrier function with respect to the configuration variables is
required for the computation of the barrier condition.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>configuration</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference internal" href="introduction.html#pink.configuration.Configuration" title="pink.configuration.Configuration"><code class="xref py py-class docutils literal notranslate"><span class="pre">Configuration</span></code></a></span>) – Robot configuration <span class="math notranslate nohighlight">\(\boldsymbol{q}\)</span>.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></a></span></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Jacobian matrix
<span class="math notranslate nohighlight">\(\frac{\partial \boldsymbol{h}}{\partial \boldsymbol{q}}(\boldsymbol{q})\)</span>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pink.barriers.Barrier.compute_qp_inequality">
<span class="sig-name descname"><span class="pre">compute_qp_inequality</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">configuration</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.001</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pink.barriers.Barrier.compute_qp_inequality" title="Link to this definition"></a></dt>
<dd><p>Compute the linear inequality constraints for the barrier-based QP.</p>
<p>The linear inequality constraints enforce the barrier conditions:</p>
<div class="math notranslate nohighlight">
\[\frac{\partial \boldsymbol{h}_j}
{\partial \boldsymbol{q}} \dot{\boldsymbol{q}} +
\alpha_j(\boldsymbol{h}_j(\boldsymbol{q})) \geq 0, \quad \forall j\]</div>
<p>where <span class="math notranslate nohighlight">\(\frac{\partial \boldsymbol{h}_j}{\partial \boldsymbol{q}}\)</span>
are the Jacobians of the constraint functions,
<span class="math notranslate nohighlight">\(\dot{\boldsymbol{q}}\)</span> is the joint velocity vector,
and <span class="math notranslate nohighlight">\(\alpha_j\)</span> are extended class K functions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>configuration</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference internal" href="introduction.html#pink.configuration.Configuration" title="pink.configuration.Configuration"><code class="xref py py-class docutils literal notranslate"><span class="pre">Configuration</span></code></a></span>) – Robot configuration <span class="math notranslate nohighlight">\(\boldsymbol{q}\)</span>.</p></li>
<li><p><strong>dt</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></span>) – Time step for discrete-time implementation. Defaults to 1e-3.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></a>, <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></a>]</span></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><dl class="simple">
<dt>Tuple containing the inequality constraint matrix (G)</dt><dd><p>and vector (h).</p>
</dd>
</dl>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pink.barriers.Barrier.compute_qp_objective">
<span class="sig-name descname"><span class="pre">compute_qp_objective</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">configuration</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pink.barriers.Barrier.compute_qp_objective" title="Link to this definition"></a></dt>
<dd><p>Compute the quadratic objective function for the barrier-based QP.</p>
<p>The quadratic objective function includes a regularization term
based on the safe backup policy:</p>
<div class="math notranslate nohighlight">
\[\gamma(\boldsymbol{q})\left\| \dot{\boldsymbol{q}}-
\dot{\boldsymbol{q}}_{safe}(\boldsymbol{q})\right\|^{2}\]</div>
<p>where <span class="math notranslate nohighlight">\(\gamma(\boldsymbol{q})\)</span> is a configuration-dependent
weight and <span class="math notranslate nohighlight">\(\dot{\boldsymbol{q}}_{safe}(\boldsymbol{q})\)</span>
is the safe backup policy.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>configuration</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference internal" href="introduction.html#pink.configuration.Configuration" title="pink.configuration.Configuration"><code class="xref py py-class docutils literal notranslate"><span class="pre">Configuration</span></code></a></span>) – Robot configuration <span class="math notranslate nohighlight">\(\boldsymbol{q}\)</span>.</p></li>
<li><p><strong>dt</strong> – Time step for discrete-time implementation. Defaults to 1e-3.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></a>, <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></a>]</span></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><dl class="simple">
<dt>Tuple containing the quadratic objective matrix (H) and linear</dt><dd><p>objective vector (c).</p>
</dd>
</dl>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pink.barriers.Barrier.compute_safe_policy">
<span class="sig-name descname"><span class="pre">compute_safe_policy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">configuration</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pink.barriers.Barrier.compute_safe_policy" title="Link to this definition"></a></dt>
<dd><p>Compute the safe backup control policy.</p>
<p>The safe backup control policy
<span class="math notranslate nohighlight">\(\dot{\boldsymbol{q}}_{safe}(\boldsymbol{q})\)</span> is a joint
velocity vector that can be used as a regularization term in the
optimization problem to ensure safety.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>configuration</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference internal" href="introduction.html#pink.configuration.Configuration" title="pink.configuration.Configuration"><code class="xref py py-class docutils literal notranslate"><span class="pre">Configuration</span></code></a></span>) – Robot configuration <span class="math notranslate nohighlight">\(\boldsymbol{q}\)</span>.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></a></span></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><dl class="simple">
<dt>Safe backup joint velocities</dt><dd><p><span class="math notranslate nohighlight">\(\dot{\boldsymbol{q}}_{safe}(\boldsymbol{q})\)</span>.</p>
</dd>
</dl>
</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pink.barriers.BodySphericalBarrier">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pink.barriers.</span></span><span class="sig-name descname"><span class="pre">BodySphericalBarrier</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">frames</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">d_min</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gain</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">r</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3.0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pink.barriers.BodySphericalBarrier" title="Link to this definition"></a></dt>
<dd><p>A barrier based on the distance between two frames.</p>
<p>Defines a barrier function based on the Euclidean distance between two
specified frames. It allows for the specification of a minimum distance
threshold.</p>
<p>The barrier function is defined as:</p>
<div class="math notranslate nohighlight">
\[h(\boldsymbol{q}) = \|\boldsymbol{p}_1(\boldsymbol{q}) -
\boldsymbol{p}_2(\boldsymbol{q})\|^2 - d_{min}^2\]</div>
<p>where <span class="math notranslate nohighlight">\(\boldsymbol{p}_1(\boldsymbol{q})\)</span> and
<span class="math notranslate nohighlight">\(\boldsymbol{p}_2(\boldsymbol{q})\)</span> are the positions of the two
frames in the world coordinate system, and <span class="math notranslate nohighlight">\(d_{min}\)</span>
is the minimum distance threshold.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="pink.barriers.BodySphericalBarrier.frames">
<span class="sig-name descname"><span class="pre">frames</span></span><a class="headerlink" href="#pink.barriers.BodySphericalBarrier.frames" title="Link to this definition"></a></dt>
<dd><p>Tuple of two frame names.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pink.barriers.BodySphericalBarrier.d_min">
<span class="sig-name descname"><span class="pre">d_min</span></span><a class="headerlink" href="#pink.barriers.BodySphericalBarrier.d_min" title="Link to this definition"></a></dt>
<dd><p>Minimum distance threshold.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pink.barriers.BodySphericalBarrier.compute_barrier">
<span class="sig-name descname"><span class="pre">compute_barrier</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">configuration</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pink.barriers.BodySphericalBarrier.compute_barrier" title="Link to this definition"></a></dt>
<dd><p>Compute the value of the barrier function.</p>
<p>The barrier function is computed based on the Euclidean distance
between the two specified frames. It considers the minimum distance
threshold.</p>
<p>The barrier function is given by:</p>
<div class="math notranslate nohighlight">
\[h(\boldsymbol{q}) = \|\boldsymbol{p}_1(\boldsymbol{q}) -
\boldsymbol{p}_2(\boldsymbol{q})\|^2 - d_{min}^2\]</div>
<p>where <span class="math notranslate nohighlight">\(\boldsymbol{p}_1(\boldsymbol{q})\)</span> and
<span class="math notranslate nohighlight">\(\boldsymbol{p}_2(\boldsymbol{q})\)</span> are the positions of the two
frames in the world coordinate system, and <span class="math notranslate nohighlight">\(d_{min}\)</span>
is the minimum distance threshold.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>configuration</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference internal" href="introduction.html#pink.configuration.Configuration" title="pink.configuration.Configuration"><code class="xref py py-class docutils literal notranslate"><span class="pre">Configuration</span></code></a></span>) – Robot configuration <span class="math notranslate nohighlight">\(\boldsymbol{q}\)</span>.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></a></span></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><dl class="simple">
<dt>Value of the barrier function</dt><dd><p><span class="math notranslate nohighlight">\(\boldsymbol{h}(\boldsymbol{q})\)</span>.</p>
</dd>
</dl>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pink.barriers.BodySphericalBarrier.compute_jacobian">
<span class="sig-name descname"><span class="pre">compute_jacobian</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">configuration</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pink.barriers.BodySphericalBarrier.compute_jacobian" title="Link to this definition"></a></dt>
<dd><p>Compute the Jacobian matrix of the barrier function.</p>
<p>The Jacobian matrix is computed based on the position Jacobians of the
two specified frames. The Jacobians are transformed to align with the
world coordinate system.</p>
<p>The Jacobian matrix is given by:</p>
<div class="math notranslate nohighlight">
\[\begin{split}\frac{\partial h}{\partial \boldsymbol{q}}(\boldsymbol{q}) =
2(\boldsymbol{p}_1(\boldsymbol{q}) -
\boldsymbol{p}_2(\boldsymbol{q}))^T \begin{bmatrix}
    \frac{\partial \boldsymbol{p}_1}{\partial \boldsymbol{q}}
    (\boldsymbol{q}) \\
    -\frac{\partial \boldsymbol{p}_2}{\partial \boldsymbol{q}}
    (\boldsymbol{q})
\end{bmatrix}\end{split}\]</div>
<p>where <span class="math notranslate nohighlight">\(\frac{\partial \boldsymbol{p}_1}{\partial \boldsymbol{q}}(\boldsymbol{q})\)</span>
and <span class="math notranslate nohighlight">\(\frac{\partial \boldsymbol{p}_2}{\partial \boldsymbol{q}}(\boldsymbol{q})\)</span>
are the position Jacobians of the two frames.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>configuration</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference internal" href="introduction.html#pink.configuration.Configuration" title="pink.configuration.Configuration"><code class="xref py py-class docutils literal notranslate"><span class="pre">Configuration</span></code></a></span>) – Robot configuration <span class="math notranslate nohighlight">\(\boldsymbol{q}\)</span>.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></a></span></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><dl class="simple">
<dt>Jacobian matrix</dt><dd><p><span class="math notranslate nohighlight">\(\frac{\partial \boldsymbol{h}}{\partial \boldsymbol{q}}(\boldsymbol{q})\)</span>.</p>
</dd>
</dl>
</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pink.barriers.ConfigurationBarrier">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pink.barriers.</span></span><span class="sig-name descname"><span class="pre">ConfigurationBarrier</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gain</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">r</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3.0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pink.barriers.ConfigurationBarrier" title="Link to this definition"></a></dt>
<dd><p>Barrier based on joint configuration limits.</p>
<p>The ConfigurationBarrier class represents a subset of bounded joints
associated with a robot model. It defines a barrier function based on the
joint configuration limits to ensure that the joint positions remain within
the specified bounds.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="pink.barriers.ConfigurationBarrier.indices">
<span class="sig-name descname"><span class="pre">indices</span></span><a class="headerlink" href="#pink.barriers.ConfigurationBarrier.indices" title="Link to this definition"></a></dt>
<dd><p>Indices of the bounded joints.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pink.barriers.ConfigurationBarrier.model">
<span class="sig-name descname"><span class="pre">model</span></span><a class="headerlink" href="#pink.barriers.ConfigurationBarrier.model" title="Link to this definition"></a></dt>
<dd><p>Pinocchio model of the robot.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pink.barriers.ConfigurationBarrier.joints">
<span class="sig-name descname"><span class="pre">joints</span></span><a class="headerlink" href="#pink.barriers.ConfigurationBarrier.joints" title="Link to this definition"></a></dt>
<dd><p>List of bounded joints.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pink.barriers.ConfigurationBarrier.projection_matrix">
<span class="sig-name descname"><span class="pre">projection_matrix</span></span><a class="headerlink" href="#pink.barriers.ConfigurationBarrier.projection_matrix" title="Link to this definition"></a></dt>
<dd><p>Projection matrix for the bounded joints.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pink.barriers.ConfigurationBarrier.compute_barrier">
<span class="sig-name descname"><span class="pre">compute_barrier</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">configuration</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pink.barriers.ConfigurationBarrier.compute_barrier" title="Link to this definition"></a></dt>
<dd><p>Compute the value of the barrier function.</p>
<p>The barrier function is computed based on the distances between the
current joint positions and the upper and lower joint limits.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>configuration</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference internal" href="introduction.html#pink.configuration.Configuration" title="pink.configuration.Configuration"><code class="xref py py-class docutils literal notranslate"><span class="pre">Configuration</span></code></a></span>) – Robot configuration <span class="math notranslate nohighlight">\(\boldsymbol{q}\)</span>.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></a></span></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><dl class="simple">
<dt>Value of the barrier function</dt><dd><p><span class="math notranslate nohighlight">\(\boldsymbol{h}(\boldsymbol{q})\)</span>.</p>
</dd>
</dl>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pink.barriers.ConfigurationBarrier.compute_jacobian">
<span class="sig-name descname"><span class="pre">compute_jacobian</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">configuration</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pink.barriers.ConfigurationBarrier.compute_jacobian" title="Link to this definition"></a></dt>
<dd><p>Compute the Jacobian matrix of the barrier function.</p>
<p>The Jacobian matrix is computed based on the projection matrix for the
bounded joints. It maps the joint velocities to the barrier function
space.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>configuration</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference internal" href="introduction.html#pink.configuration.Configuration" title="pink.configuration.Configuration"><code class="xref py py-class docutils literal notranslate"><span class="pre">Configuration</span></code></a></span>) – Robot configuration <span class="math notranslate nohighlight">\(\boldsymbol{q}\)</span>.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></a></span></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><dl class="simple">
<dt>Jacobian matrix</dt><dd><p><span class="math notranslate nohighlight">\(\frac{\partial \boldsymbol{h}}{\partial \boldsymbol{q}}(\boldsymbol{q})\)</span>.</p>
</dd>
</dl>
</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pink.barriers.PositionBarrier">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pink.barriers.</span></span><span class="sig-name descname"><span class="pre">PositionBarrier</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">frame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indices</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">p_min</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">p_max</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gain</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">r</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3.0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pink.barriers.PositionBarrier" title="Link to this definition"></a></dt>
<dd><p>A position-based barrier.</p>
<p>Defines a barrier function based on the position of a
specified frame in the world coordinate system. It allows for the
specification of minimum and maximum position bounds along selected axes.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="pink.barriers.PositionBarrier.frame">
<span class="sig-name descname"><span class="pre">frame</span></span><a class="headerlink" href="#pink.barriers.PositionBarrier.frame" title="Link to this definition"></a></dt>
<dd><p>Name of the frame to monitor.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pink.barriers.PositionBarrier.indices">
<span class="sig-name descname"><span class="pre">indices</span></span><a class="headerlink" href="#pink.barriers.PositionBarrier.indices" title="Link to this definition"></a></dt>
<dd><p>Indices of the position components to consider.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pink.barriers.PositionBarrier.p_min">
<span class="sig-name descname"><span class="pre">p_min</span></span><a class="headerlink" href="#pink.barriers.PositionBarrier.p_min" title="Link to this definition"></a></dt>
<dd><p>Minimum position bounds.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pink.barriers.PositionBarrier.p_max">
<span class="sig-name descname"><span class="pre">p_max</span></span><a class="headerlink" href="#pink.barriers.PositionBarrier.p_max" title="Link to this definition"></a></dt>
<dd><p>Maximum position bounds.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pink.barriers.PositionBarrier.compute_barrier">
<span class="sig-name descname"><span class="pre">compute_barrier</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">configuration</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pink.barriers.PositionBarrier.compute_barrier" title="Link to this definition"></a></dt>
<dd><p>Compute the value of the barrier function.</p>
<p>The barrier function is computed based on the position of the specified
frame in the world coordinate system. It considers the minimum and
maximum position bounds along the selected axes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>configuration</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference internal" href="introduction.html#pink.configuration.Configuration" title="pink.configuration.Configuration"><code class="xref py py-class docutils literal notranslate"><span class="pre">Configuration</span></code></a></span>) – Robot configuration <span class="math notranslate nohighlight">\(\boldsymbol{q}\)</span>.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></a></span></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Value of the barrier function
<span class="math notranslate nohighlight">\(\boldsymbol{h}(\boldsymbol{q})\)</span>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pink.barriers.PositionBarrier.compute_jacobian">
<span class="sig-name descname"><span class="pre">compute_jacobian</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">configuration</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pink.barriers.PositionBarrier.compute_jacobian" title="Link to this definition"></a></dt>
<dd><p>Compute the Jacobian matrix of the barrier function.</p>
<p>The Jacobian matrix is computed based on the position Jacobian of the
specified frame. The Jacobian is transformed to align with the world
coordinate system and only the selected indices are considered.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>configuration</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference internal" href="introduction.html#pink.configuration.Configuration" title="pink.configuration.Configuration"><code class="xref py py-class docutils literal notranslate"><span class="pre">Configuration</span></code></a></span>) – Robot configuration <span class="math notranslate nohighlight">\(\boldsymbol{q}\)</span>.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></a></span></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Jacobian matrix
<span class="math notranslate nohighlight">\(\frac{\partial \boldsymbol{h}}{\partial \boldsymbol{q}}(\boldsymbol{q})\)</span>.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<section id="module-pink.barriers.position_barrier">
<span id="position-barrier"></span><h2>Position Barrier<a class="headerlink" href="#module-pink.barriers.position_barrier" title="Link to this heading"></a></h2>
<p>Frame position barrier.</p>
<dl class="py class">
<dt class="sig sig-object py" id="pink.barriers.position_barrier.PositionBarrier">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pink.barriers.position_barrier.</span></span><span class="sig-name descname"><span class="pre">PositionBarrier</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">frame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indices</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">p_min</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">p_max</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gain</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">r</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3.0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pink.barriers.position_barrier.PositionBarrier" title="Link to this definition"></a></dt>
<dd><p>A position-based barrier.</p>
<p>Defines a barrier function based on the position of a
specified frame in the world coordinate system. It allows for the
specification of minimum and maximum position bounds along selected axes.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="pink.barriers.position_barrier.PositionBarrier.frame">
<span class="sig-name descname"><span class="pre">frame</span></span><a class="headerlink" href="#pink.barriers.position_barrier.PositionBarrier.frame" title="Link to this definition"></a></dt>
<dd><p>Name of the frame to monitor.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pink.barriers.position_barrier.PositionBarrier.indices">
<span class="sig-name descname"><span class="pre">indices</span></span><a class="headerlink" href="#pink.barriers.position_barrier.PositionBarrier.indices" title="Link to this definition"></a></dt>
<dd><p>Indices of the position components to consider.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pink.barriers.position_barrier.PositionBarrier.p_min">
<span class="sig-name descname"><span class="pre">p_min</span></span><a class="headerlink" href="#pink.barriers.position_barrier.PositionBarrier.p_min" title="Link to this definition"></a></dt>
<dd><p>Minimum position bounds.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pink.barriers.position_barrier.PositionBarrier.p_max">
<span class="sig-name descname"><span class="pre">p_max</span></span><a class="headerlink" href="#pink.barriers.position_barrier.PositionBarrier.p_max" title="Link to this definition"></a></dt>
<dd><p>Maximum position bounds.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pink.barriers.position_barrier.PositionBarrier.compute_barrier">
<span class="sig-name descname"><span class="pre">compute_barrier</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">configuration</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pink.barriers.position_barrier.PositionBarrier.compute_barrier" title="Link to this definition"></a></dt>
<dd><p>Compute the value of the barrier function.</p>
<p>The barrier function is computed based on the position of the specified
frame in the world coordinate system. It considers the minimum and
maximum position bounds along the selected axes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>configuration</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference internal" href="introduction.html#pink.configuration.Configuration" title="pink.configuration.Configuration"><code class="xref py py-class docutils literal notranslate"><span class="pre">Configuration</span></code></a></span>) – Robot configuration <span class="math notranslate nohighlight">\(\boldsymbol{q}\)</span>.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></a></span></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Value of the barrier function
<span class="math notranslate nohighlight">\(\boldsymbol{h}(\boldsymbol{q})\)</span>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pink.barriers.position_barrier.PositionBarrier.compute_jacobian">
<span class="sig-name descname"><span class="pre">compute_jacobian</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">configuration</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pink.barriers.position_barrier.PositionBarrier.compute_jacobian" title="Link to this definition"></a></dt>
<dd><p>Compute the Jacobian matrix of the barrier function.</p>
<p>The Jacobian matrix is computed based on the position Jacobian of the
specified frame. The Jacobian is transformed to align with the world
coordinate system and only the selected indices are considered.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>configuration</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference internal" href="introduction.html#pink.configuration.Configuration" title="pink.configuration.Configuration"><code class="xref py py-class docutils literal notranslate"><span class="pre">Configuration</span></code></a></span>) – Robot configuration <span class="math notranslate nohighlight">\(\boldsymbol{q}\)</span>.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></a></span></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Jacobian matrix
<span class="math notranslate nohighlight">\(\frac{\partial \boldsymbol{h}}{\partial \boldsymbol{q}}(\boldsymbol{q})\)</span>.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-pink.barriers.configuration_barrier">
<span id="configuration-barrier"></span><h2>Configuration Barrier<a class="headerlink" href="#module-pink.barriers.configuration_barrier" title="Link to this heading"></a></h2>
<p>Joint configuration barrier.</p>
<dl class="py class">
<dt class="sig sig-object py" id="pink.barriers.configuration_barrier.ConfigurationBarrier">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pink.barriers.configuration_barrier.</span></span><span class="sig-name descname"><span class="pre">ConfigurationBarrier</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gain</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">r</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3.0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pink.barriers.configuration_barrier.ConfigurationBarrier" title="Link to this definition"></a></dt>
<dd><p>Barrier based on joint configuration limits.</p>
<p>The ConfigurationBarrier class represents a subset of bounded joints
associated with a robot model. It defines a barrier function based on the
joint configuration limits to ensure that the joint positions remain within
the specified bounds.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="pink.barriers.configuration_barrier.ConfigurationBarrier.indices">
<span class="sig-name descname"><span class="pre">indices</span></span><a class="headerlink" href="#pink.barriers.configuration_barrier.ConfigurationBarrier.indices" title="Link to this definition"></a></dt>
<dd><p>Indices of the bounded joints.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pink.barriers.configuration_barrier.ConfigurationBarrier.model">
<span class="sig-name descname"><span class="pre">model</span></span><a class="headerlink" href="#pink.barriers.configuration_barrier.ConfigurationBarrier.model" title="Link to this definition"></a></dt>
<dd><p>Pinocchio model of the robot.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pink.barriers.configuration_barrier.ConfigurationBarrier.joints">
<span class="sig-name descname"><span class="pre">joints</span></span><a class="headerlink" href="#pink.barriers.configuration_barrier.ConfigurationBarrier.joints" title="Link to this definition"></a></dt>
<dd><p>List of bounded joints.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pink.barriers.configuration_barrier.ConfigurationBarrier.projection_matrix">
<span class="sig-name descname"><span class="pre">projection_matrix</span></span><a class="headerlink" href="#pink.barriers.configuration_barrier.ConfigurationBarrier.projection_matrix" title="Link to this definition"></a></dt>
<dd><p>Projection matrix for the bounded joints.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pink.barriers.configuration_barrier.ConfigurationBarrier.compute_barrier">
<span class="sig-name descname"><span class="pre">compute_barrier</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">configuration</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pink.barriers.configuration_barrier.ConfigurationBarrier.compute_barrier" title="Link to this definition"></a></dt>
<dd><p>Compute the value of the barrier function.</p>
<p>The barrier function is computed based on the distances between the
current joint positions and the upper and lower joint limits.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>configuration</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference internal" href="introduction.html#pink.configuration.Configuration" title="pink.configuration.Configuration"><code class="xref py py-class docutils literal notranslate"><span class="pre">Configuration</span></code></a></span>) – Robot configuration <span class="math notranslate nohighlight">\(\boldsymbol{q}\)</span>.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></a></span></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><dl class="simple">
<dt>Value of the barrier function</dt><dd><p><span class="math notranslate nohighlight">\(\boldsymbol{h}(\boldsymbol{q})\)</span>.</p>
</dd>
</dl>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pink.barriers.configuration_barrier.ConfigurationBarrier.compute_jacobian">
<span class="sig-name descname"><span class="pre">compute_jacobian</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">configuration</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pink.barriers.configuration_barrier.ConfigurationBarrier.compute_jacobian" title="Link to this definition"></a></dt>
<dd><p>Compute the Jacobian matrix of the barrier function.</p>
<p>The Jacobian matrix is computed based on the projection matrix for the
bounded joints. It maps the joint velocities to the barrier function
space.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>configuration</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference internal" href="introduction.html#pink.configuration.Configuration" title="pink.configuration.Configuration"><code class="xref py py-class docutils literal notranslate"><span class="pre">Configuration</span></code></a></span>) – Robot configuration <span class="math notranslate nohighlight">\(\boldsymbol{q}\)</span>.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></a></span></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><dl class="simple">
<dt>Jacobian matrix</dt><dd><p><span class="math notranslate nohighlight">\(\frac{\partial \boldsymbol{h}}{\partial \boldsymbol{q}}(\boldsymbol{q})\)</span>.</p>
</dd>
</dl>
</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-pink.barriers.body_spherical_barrier">
<span id="spherical-collision-avoidance-barrier"></span><h2>Spherical Collision-Avoidance Barrier<a class="headerlink" href="#module-pink.barriers.body_spherical_barrier" title="Link to this heading"></a></h2>
<p>Barrier based on the distance between two frames.</p>
<dl class="py class">
<dt class="sig sig-object py" id="pink.barriers.body_spherical_barrier.BodySphericalBarrier">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pink.barriers.body_spherical_barrier.</span></span><span class="sig-name descname"><span class="pre">BodySphericalBarrier</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">frames</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">d_min</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gain</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">r</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3.0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pink.barriers.body_spherical_barrier.BodySphericalBarrier" title="Link to this definition"></a></dt>
<dd><p>A barrier based on the distance between two frames.</p>
<p>Defines a barrier function based on the Euclidean distance between two
specified frames. It allows for the specification of a minimum distance
threshold.</p>
<p>The barrier function is defined as:</p>
<div class="math notranslate nohighlight">
\[h(\boldsymbol{q}) = \|\boldsymbol{p}_1(\boldsymbol{q}) -
\boldsymbol{p}_2(\boldsymbol{q})\|^2 - d_{min}^2\]</div>
<p>where <span class="math notranslate nohighlight">\(\boldsymbol{p}_1(\boldsymbol{q})\)</span> and
<span class="math notranslate nohighlight">\(\boldsymbol{p}_2(\boldsymbol{q})\)</span> are the positions of the two
frames in the world coordinate system, and <span class="math notranslate nohighlight">\(d_{min}\)</span>
is the minimum distance threshold.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="pink.barriers.body_spherical_barrier.BodySphericalBarrier.frames">
<span class="sig-name descname"><span class="pre">frames</span></span><a class="headerlink" href="#pink.barriers.body_spherical_barrier.BodySphericalBarrier.frames" title="Link to this definition"></a></dt>
<dd><p>Tuple of two frame names.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pink.barriers.body_spherical_barrier.BodySphericalBarrier.d_min">
<span class="sig-name descname"><span class="pre">d_min</span></span><a class="headerlink" href="#pink.barriers.body_spherical_barrier.BodySphericalBarrier.d_min" title="Link to this definition"></a></dt>
<dd><p>Minimum distance threshold.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pink.barriers.body_spherical_barrier.BodySphericalBarrier.compute_barrier">
<span class="sig-name descname"><span class="pre">compute_barrier</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">configuration</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pink.barriers.body_spherical_barrier.BodySphericalBarrier.compute_barrier" title="Link to this definition"></a></dt>
<dd><p>Compute the value of the barrier function.</p>
<p>The barrier function is computed based on the Euclidean distance
between the two specified frames. It considers the minimum distance
threshold.</p>
<p>The barrier function is given by:</p>
<div class="math notranslate nohighlight">
\[h(\boldsymbol{q}) = \|\boldsymbol{p}_1(\boldsymbol{q}) -
\boldsymbol{p}_2(\boldsymbol{q})\|^2 - d_{min}^2\]</div>
<p>where <span class="math notranslate nohighlight">\(\boldsymbol{p}_1(\boldsymbol{q})\)</span> and
<span class="math notranslate nohighlight">\(\boldsymbol{p}_2(\boldsymbol{q})\)</span> are the positions of the two
frames in the world coordinate system, and <span class="math notranslate nohighlight">\(d_{min}\)</span>
is the minimum distance threshold.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>configuration</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference internal" href="introduction.html#pink.configuration.Configuration" title="pink.configuration.Configuration"><code class="xref py py-class docutils literal notranslate"><span class="pre">Configuration</span></code></a></span>) – Robot configuration <span class="math notranslate nohighlight">\(\boldsymbol{q}\)</span>.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></a></span></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><dl class="simple">
<dt>Value of the barrier function</dt><dd><p><span class="math notranslate nohighlight">\(\boldsymbol{h}(\boldsymbol{q})\)</span>.</p>
</dd>
</dl>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pink.barriers.body_spherical_barrier.BodySphericalBarrier.compute_jacobian">
<span class="sig-name descname"><span class="pre">compute_jacobian</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">configuration</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pink.barriers.body_spherical_barrier.BodySphericalBarrier.compute_jacobian" title="Link to this definition"></a></dt>
<dd><p>Compute the Jacobian matrix of the barrier function.</p>
<p>The Jacobian matrix is computed based on the position Jacobians of the
two specified frames. The Jacobians are transformed to align with the
world coordinate system.</p>
<p>The Jacobian matrix is given by:</p>
<div class="math notranslate nohighlight">
\[\begin{split}\frac{\partial h}{\partial \boldsymbol{q}}(\boldsymbol{q}) =
2(\boldsymbol{p}_1(\boldsymbol{q}) -
\boldsymbol{p}_2(\boldsymbol{q}))^T \begin{bmatrix}
    \frac{\partial \boldsymbol{p}_1}{\partial \boldsymbol{q}}
    (\boldsymbol{q}) \\
    -\frac{\partial \boldsymbol{p}_2}{\partial \boldsymbol{q}}
    (\boldsymbol{q})
\end{bmatrix}\end{split}\]</div>
<p>where <span class="math notranslate nohighlight">\(\frac{\partial \boldsymbol{p}_1}{\partial \boldsymbol{q}}(\boldsymbol{q})\)</span>
and <span class="math notranslate nohighlight">\(\frac{\partial \boldsymbol{p}_2}{\partial \boldsymbol{q}}(\boldsymbol{q})\)</span>
are the position Jacobians of the two frames.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>configuration</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference internal" href="introduction.html#pink.configuration.Configuration" title="pink.configuration.Configuration"><code class="xref py py-class docutils literal notranslate"><span class="pre">Configuration</span></code></a></span>) – Robot configuration <span class="math notranslate nohighlight">\(\boldsymbol{q}\)</span>.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.26)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></a></span></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><dl class="simple">
<dt>Jacobian matrix</dt><dd><p><span class="math notranslate nohighlight">\(\frac{\partial \boldsymbol{h}}{\partial \boldsymbol{q}}(\boldsymbol{q})\)</span>.</p>
</dd>
</dl>
</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="limits.html" class="btn btn-neutral float-left" title="Limits" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="inverse-kinematics.html" class="btn btn-neutral float-right" title="Inverse kinematics" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022 Stéphane Caron..</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>