<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" sizes="16x16" type="image/png" href="_static/favicon-16x16.png">
    <link rel="icon" sizes="32x32" type="image/png" href="_static/favicon-32x32.png">
    <link rel="apple-touch-icon" sizes="180x180" type="image/png" href="_static/apple-touch-icon-180x180.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tasks &mdash; pink 3.0.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="_static/custom.css?v=6d33002f" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=acc74ff5"></script>
        <script src="_static/doctools.js?v=9a2dae69"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
        <script async="async" src="_static/mathjax/tex-chtml.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Limits" href="limits.html" />
    <link rel="prev" title="Introduction" href="introduction.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            pink
          </a>
              <div class="version">
                3.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Tasks</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#module-pink.tasks.task">Definition</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#pink.tasks.task.Task"><code class="docutils literal notranslate"><span class="pre">Task</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#pink.tasks.task.Task.cost"><code class="docutils literal notranslate"><span class="pre">Task.cost</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pink.tasks.task.Task.gain"><code class="docutils literal notranslate"><span class="pre">Task.gain</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pink.tasks.task.Task.lm_damping"><code class="docutils literal notranslate"><span class="pre">Task.lm_damping</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pink.tasks.task.Task.compute_error"><code class="docutils literal notranslate"><span class="pre">Task.compute_error()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pink.tasks.task.Task.compute_jacobian"><code class="docutils literal notranslate"><span class="pre">Task.compute_jacobian()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pink.tasks.task.Task.compute_qp_objective"><code class="docutils literal notranslate"><span class="pre">Task.compute_qp_objective()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-pink.tasks.frame_task">Frame task</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#pink.tasks.frame_task.FrameTask"><code class="docutils literal notranslate"><span class="pre">FrameTask</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#pink.tasks.frame_task.FrameTask.frame"><code class="docutils literal notranslate"><span class="pre">FrameTask.frame</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pink.tasks.frame_task.FrameTask.transform_target_to_world"><code class="docutils literal notranslate"><span class="pre">FrameTask.transform_target_to_world</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pink.tasks.frame_task.FrameTask.compute_error"><code class="docutils literal notranslate"><span class="pre">FrameTask.compute_error()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pink.tasks.frame_task.FrameTask.compute_jacobian"><code class="docutils literal notranslate"><span class="pre">FrameTask.compute_jacobian()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pink.tasks.frame_task.FrameTask.set_orientation_cost"><code class="docutils literal notranslate"><span class="pre">FrameTask.set_orientation_cost()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pink.tasks.frame_task.FrameTask.set_position_cost"><code class="docutils literal notranslate"><span class="pre">FrameTask.set_position_cost()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pink.tasks.frame_task.FrameTask.set_target"><code class="docutils literal notranslate"><span class="pre">FrameTask.set_target()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pink.tasks.frame_task.FrameTask.set_target_from_configuration"><code class="docutils literal notranslate"><span class="pre">FrameTask.set_target_from_configuration()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-pink.tasks.relative_frame_task">Relative frame task</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#pink.tasks.relative_frame_task.RelativeFrameTask"><code class="docutils literal notranslate"><span class="pre">RelativeFrameTask</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#pink.tasks.relative_frame_task.RelativeFrameTask.frame"><code class="docutils literal notranslate"><span class="pre">RelativeFrameTask.frame</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pink.tasks.relative_frame_task.RelativeFrameTask.root"><code class="docutils literal notranslate"><span class="pre">RelativeFrameTask.root</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pink.tasks.relative_frame_task.RelativeFrameTask.transform_target_to_root"><code class="docutils literal notranslate"><span class="pre">RelativeFrameTask.transform_target_to_root</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pink.tasks.relative_frame_task.RelativeFrameTask.compute_error"><code class="docutils literal notranslate"><span class="pre">RelativeFrameTask.compute_error()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pink.tasks.relative_frame_task.RelativeFrameTask.compute_jacobian"><code class="docutils literal notranslate"><span class="pre">RelativeFrameTask.compute_jacobian()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pink.tasks.relative_frame_task.RelativeFrameTask.set_orientation_cost"><code class="docutils literal notranslate"><span class="pre">RelativeFrameTask.set_orientation_cost()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pink.tasks.relative_frame_task.RelativeFrameTask.set_position_cost"><code class="docutils literal notranslate"><span class="pre">RelativeFrameTask.set_position_cost()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pink.tasks.relative_frame_task.RelativeFrameTask.set_target"><code class="docutils literal notranslate"><span class="pre">RelativeFrameTask.set_target()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pink.tasks.relative_frame_task.RelativeFrameTask.set_target_from_configuration"><code class="docutils literal notranslate"><span class="pre">RelativeFrameTask.set_target_from_configuration()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-pink.tasks.joint_coupling_task">Joint coupling task</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#pink.tasks.joint_coupling_task.JointCouplingTask"><code class="docutils literal notranslate"><span class="pre">JointCouplingTask</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-pink.tasks.linear_holonomic_task">Linear holonomic task</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#pink.tasks.linear_holonomic_task.LinearHolonomicTask"><code class="docutils literal notranslate"><span class="pre">LinearHolonomicTask</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#pink.tasks.linear_holonomic_task.LinearHolonomicTask.A"><code class="docutils literal notranslate"><span class="pre">LinearHolonomicTask.A</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pink.tasks.linear_holonomic_task.LinearHolonomicTask.b"><code class="docutils literal notranslate"><span class="pre">LinearHolonomicTask.b</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pink.tasks.linear_holonomic_task.LinearHolonomicTask.q_0"><code class="docutils literal notranslate"><span class="pre">LinearHolonomicTask.q_0</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pink.tasks.linear_holonomic_task.LinearHolonomicTask.compute_error"><code class="docutils literal notranslate"><span class="pre">LinearHolonomicTask.compute_error()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pink.tasks.linear_holonomic_task.LinearHolonomicTask.compute_jacobian"><code class="docutils literal notranslate"><span class="pre">LinearHolonomicTask.compute_jacobian()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-pink.tasks.posture_task">Posture task</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#pink.tasks.posture_task.PostureTask"><code class="docutils literal notranslate"><span class="pre">PostureTask</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#pink.tasks.posture_task.PostureTask.target_q"><code class="docutils literal notranslate"><span class="pre">PostureTask.target_q</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pink.tasks.posture_task.PostureTask.compute_error"><code class="docutils literal notranslate"><span class="pre">PostureTask.compute_error()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pink.tasks.posture_task.PostureTask.compute_jacobian"><code class="docutils literal notranslate"><span class="pre">PostureTask.compute_jacobian()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pink.tasks.posture_task.PostureTask.set_target"><code class="docutils literal notranslate"><span class="pre">PostureTask.set_target()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#pink.tasks.posture_task.PostureTask.set_target_from_configuration"><code class="docutils literal notranslate"><span class="pre">PostureTask.set_target_from_configuration()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="limits.html">Limits</a></li>
<li class="toctree-l1"><a class="reference internal" href="barriers.html">Barriers</a></li>
<li class="toctree-l1"><a class="reference internal" href="inverse-kinematics.html">Inverse kinematics</a></li>
<li class="toctree-l1"><a class="reference internal" href="developer-notes.html">Developer notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="references.html">References</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">pink</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Tasks</li>
      <li class="wy-breadcrumbs-aside">
              <!-- User defined GitHub URL -->
              <a href="https://github.com/stephane-caron/pink/tree/main/doc/tasks.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="tasks">
<span id="id1"></span><h1>Tasks<a class="headerlink" href="#tasks" title="Link to this heading"></a></h1>
<section id="module-pink.tasks.task">
<span id="definition"></span><h2>Definition<a class="headerlink" href="#module-pink.tasks.task" title="Link to this heading"></a></h2>
<p>All kinematic tasks derive from the <a class="reference internal" href="#pink.tasks.task.Task" title="pink.tasks.task.Task"><code class="xref py py-class docutils literal notranslate"><span class="pre">Task</span></code></a> base class.</p>
<p>The formalism used in this implementation is written down in <a class="reference external" href="https://scaron.info/robotics/differential-inverse-kinematics.html">this note on
task-based inverse kinematics</a>. As of
February 2022, it hasn’t been updated with the proper dimensional analysis, but
the core concepts and notations are there.</p>
<dl class="py class">
<dt class="sig sig-object py" id="pink.tasks.task.Task">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pink.tasks.task.</span></span><span class="sig-name descname"><span class="pre">Task</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cost</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gain</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lm_damping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pink.tasks.task.Task" title="Link to this definition"></a></dt>
<dd><p>Abstract base class for kinematic tasks.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="pink.tasks.task.Task.cost">
<span class="sig-name descname"><span class="pre">cost</span></span><a class="headerlink" href="#pink.tasks.task.Task.cost" title="Link to this definition"></a></dt>
<dd><p>cost vector with the same dimension as the error of the task. Its
units depends on the error as well.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pink.tasks.task.Task.gain">
<span class="sig-name descname"><span class="pre">gain</span></span><a class="headerlink" href="#pink.tasks.task.Task.gain" title="Link to this definition"></a></dt>
<dd><p>Task gain <span class="math notranslate nohighlight">\(\alpha \in [0, 1]\)</span> for additional low-pass
filtering. Defaults to 1.0 (no filtering) for dead-beat control.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pink.tasks.task.Task.lm_damping">
<span class="sig-name descname"><span class="pre">lm_damping</span></span><a class="headerlink" href="#pink.tasks.task.Task.lm_damping" title="Link to this definition"></a></dt>
<dd><p>Unitless scale of the Levenberg-Marquardt (only when
the error is large) regularization term, which helps when
targets are unfeasible. Increase this value if the task is too
jerky under unfeasible targets, but beware that a larger
damping slows down the task.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pink.tasks.task.Task.compute_error">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">compute_error</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">configuration</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pink.tasks.task.Task.compute_error" title="Link to this definition"></a></dt>
<dd><p>Compute the task error function.</p>
<p>The error function <span class="math notranslate nohighlight">\(e(q) \in \mathbb{R}^{k}\)</span> is the quantity that
the task aims to drive to zero (<span class="math notranslate nohighlight">\(k\)</span> is the dimension of the
task). It appears in the first-order task dynamics:</p>
<div class="math notranslate nohighlight">
\[J(q) \Delta q = -\alpha e(q)\]</div>
<p>The Jacobian matrix <span class="math notranslate nohighlight">\(J(q) \in \mathbb{R}^{k \times n_v}\)</span>, with
<span class="math notranslate nohighlight">\(n_v\)</span> the dimension of the robot’s tangent space, is the
derivative of the task error <span class="math notranslate nohighlight">\(e(q)\)</span> with respect to the
configuration <span class="math notranslate nohighlight">\(q \in \mathbb{R}^{n_q}\)</span>. This Jacobian is
implemented in <a class="reference internal" href="#pink.tasks.task.Task.compute_jacobian" title="pink.tasks.task.Task.compute_jacobian"><code class="xref py py-func docutils literal notranslate"><span class="pre">Task.compute_jacobian()</span></code></a>. Finally, the
configuration displacement <span class="math notranslate nohighlight">\(\Delta q\)</span> is the output of inverse
kinematics.</p>
<p>In the first-order task dynamics, the error <span class="math notranslate nohighlight">\(e(q)\)</span> is multiplied
by the task gain <span class="math notranslate nohighlight">\(\alpha \in [0, 1]\)</span>. This gain can be one for
dead-beat control (<em>i.e.</em> converge as fast as possible, but might be
unstable as it neglects our first-order approximation), but it can also
be lower a slower task (similar to low-pass filtering).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>configuration</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference internal" href="introduction.html#pink.configuration.Configuration" title="pink.configuration.Configuration"><code class="xref py py-class docutils literal notranslate"><span class="pre">Configuration</span></code></a></span>) – Robot configuration <span class="math notranslate nohighlight">\(q\)</span>.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></a></span></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Task error vector <span class="math notranslate nohighlight">\(e(q)\)</span>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pink.tasks.task.Task.compute_jacobian">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">compute_jacobian</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">configuration</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pink.tasks.task.Task.compute_jacobian" title="Link to this definition"></a></dt>
<dd><p>Compute the task Jacobian at a given configuration.</p>
<p>The task Jacobian <span class="math notranslate nohighlight">\(J(q) \in \mathbb{R}^{k \times n_v}\)</span> is the
first-order derivative of the error <span class="math notranslate nohighlight">\(e(q) \in \mathbb{R}^{k}\)</span>
that defines the task, with <span class="math notranslate nohighlight">\(k\)</span> the dimension of the task and
<span class="math notranslate nohighlight">\(n_v\)</span> the dimension of the robot’s tangent space.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>configuration</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference internal" href="introduction.html#pink.configuration.Configuration" title="pink.configuration.Configuration"><code class="xref py py-class docutils literal notranslate"><span class="pre">Configuration</span></code></a></span>) – Robot configuration <span class="math notranslate nohighlight">\(q\)</span>.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></a></span></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Task Jacobian <span class="math notranslate nohighlight">\(J(q)\)</span>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pink.tasks.task.Task.compute_qp_objective">
<span class="sig-name descname"><span class="pre">compute_qp_objective</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">configuration</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pink.tasks.task.Task.compute_qp_objective" title="Link to this definition"></a></dt>
<dd><p>Compute the matrix-vector pair <span class="math notranslate nohighlight">\((H, c)\)</span> of the QP objective.</p>
<p>This pair is such that the contribution of the task to the QP objective
of the IK is:</p>
<div class="math notranslate nohighlight">
\[\| J \Delta q + \alpha e \|_{W}^2 = \frac{1}{2} \Delta q^T H
\Delta q + c^T q\]</div>
<p>The weight matrix <span class="math notranslate nohighlight">\(W \in \mathbb{R}^{k \times k}\)</span> weighs and
normalizes task coordinates to the same unit. The unit of the overall
contribution is [cost]^2. The configuration displacement <span class="math notranslate nohighlight">\(\Delta
q\)</span> is the output of inverse kinematics (we divide it by <span class="math notranslate nohighlight">\(\Delta
t\)</span> to get a commanded velocity).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>configuration</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference internal" href="introduction.html#pink.configuration.Configuration" title="pink.configuration.Configuration"><code class="xref py py-class docutils literal notranslate"><span class="pre">Configuration</span></code></a></span>) – Robot configuration <span class="math notranslate nohighlight">\(q\)</span>.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-data docutils literal notranslate"><span class="pre">Tuple</span></code>[<a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></a>, <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></a>]</span></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Pair <span class="math notranslate nohighlight">\((H(q), c(q))\)</span> of Hessian matrix and linear vector of
the QP objective.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>Levenberg-Marquardt damping is described in <a class="reference internal" href="references.html#sugihara2011" id="id2"><span>[Sugihara2011]</span></a>. The
dimensional analysis in this class is our own.</p>
</div>
</dd></dl>

</dd></dl>

</section>
<section id="module-pink.tasks.frame_task">
<span id="frame-task"></span><h2>Frame task<a class="headerlink" href="#module-pink.tasks.frame_task" title="Link to this heading"></a></h2>
<p>Frame task implementation.</p>
<dl class="py class">
<dt class="sig sig-object py" id="pink.tasks.frame_task.FrameTask">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pink.tasks.frame_task.</span></span><span class="sig-name descname"><span class="pre">FrameTask</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">frame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">position_cost</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">orientation_cost</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lm_damping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gain</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pink.tasks.frame_task.FrameTask" title="Link to this definition"></a></dt>
<dd><p>Regulate the pose of a robot frame in the world frame.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="pink.tasks.frame_task.FrameTask.frame">
<span class="sig-name descname"><span class="pre">frame</span></span><a class="headerlink" href="#pink.tasks.frame_task.FrameTask.frame" title="Link to this definition"></a></dt>
<dd><p>Frame name, typically the name of a link or joint from the robot
description.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pink.tasks.frame_task.FrameTask.transform_target_to_world">
<span class="sig-name descname"><span class="pre">transform_target_to_world</span></span><a class="headerlink" href="#pink.tasks.frame_task.FrameTask.transform_target_to_world" title="Link to this definition"></a></dt>
<dd><p>Target pose of the frame.</p>
</dd></dl>

<p>Costs are designed so that errors with varying SI units, here position and
orientation displacements, can be cast to homogeneous values. For example,
if task “foo” has a position cost of 1.0 and task “bar” a position cost of
0.1, then a 1 [cm] error in task “foo” costs as much as a 10 [cm] error in
task “bar”.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Dimensionally, the 6D cost vector is a (normalized) force screw and our
objective function is a (normalized) energy.</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="pink.tasks.frame_task.FrameTask.compute_error">
<span class="sig-name descname"><span class="pre">compute_error</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">configuration</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pink.tasks.frame_task.FrameTask.compute_error" title="Link to this definition"></a></dt>
<dd><p>Compute frame task error.</p>
<p>This error is a twist <span class="math notranslate nohighlight">\(e(q) \in se(3)\)</span> expressed in the local
frame (i.e. it is a <em>body</em> twist). We map it to <span class="math notranslate nohighlight">\(\mathbb{R}^6\)</span>
using Pinocchio’s convention where linear coordinates are followed by
angular coordinates.</p>
<p>The error is the right-minus difference between the target pose
<span class="math notranslate nohighlight">\(T_{0t}\)</span> and current frame pose <span class="math notranslate nohighlight">\(T_{0b}\)</span>:</p>
<div class="math notranslate nohighlight">
\[e(q) := {}_b \xi_{0b} = -(T_{t0} \boxminus T_{b0})
= -\log(T_{t0} \cdot T_{0b}) = -\log(T_{tb}) = \log(T_{bt})\]</div>
<p>where <span class="math notranslate nohighlight">\(b\)</span> denotes our frame, <span class="math notranslate nohighlight">\(t\)</span> the target frame and
<span class="math notranslate nohighlight">\(0\)</span> the inertial frame.</p>
<p>See <a class="reference internal" href="#pink.tasks.task.Task.compute_error" title="pink.tasks.task.Task.compute_error"><code class="xref py py-func docutils literal notranslate"><span class="pre">pink.tasks.task.Task.compute_error()</span></code></a> for more context, and
<a class="reference internal" href="references.html#mlt" id="id3"><span>[MLT]</span></a> for details on the right-minus operator.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>configuration</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference internal" href="introduction.html#pink.configuration.Configuration" title="pink.configuration.Configuration"><code class="xref py py-class docutils literal notranslate"><span class="pre">Configuration</span></code></a></span>) – Robot configuration <span class="math notranslate nohighlight">\(q\)</span>.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></a></span></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Frame task error <span class="math notranslate nohighlight">\(e(q)\)</span>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pink.tasks.frame_task.FrameTask.compute_jacobian">
<span class="sig-name descname"><span class="pre">compute_jacobian</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">configuration</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pink.tasks.frame_task.FrameTask.compute_jacobian" title="Link to this definition"></a></dt>
<dd><p>Compute the frame task Jacobian.</p>
<p>The task Jacobian <span class="math notranslate nohighlight">\(J(q) \in \mathbb{R}^{6 \times n_v}\)</span> is the
derivative of the task error <span class="math notranslate nohighlight">\(e(q) \in \mathbb{R}^6\)</span> with respect
to the configuration <span class="math notranslate nohighlight">\(q\)</span>. The formula for the frame task is:</p>
<div class="math notranslate nohighlight">
\[J(q) = -\text{Jlog}_6(T_{tb}) {}_b J_{0b}(q)\]</div>
<p>The derivation of the formula for this Jacobian is detailed in
<a class="reference internal" href="references.html#frametaskjacobian" id="id4"><span>[FrameTaskJacobian]</span></a>. See also
<a class="reference internal" href="#pink.tasks.task.Task.compute_jacobian" title="pink.tasks.task.Task.compute_jacobian"><code class="xref py py-func docutils literal notranslate"><span class="pre">pink.tasks.task.Task.compute_jacobian()</span></code></a> for more context on task
Jacobians.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>configuration</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference internal" href="introduction.html#pink.configuration.Configuration" title="pink.configuration.Configuration"><code class="xref py py-class docutils literal notranslate"><span class="pre">Configuration</span></code></a></span>) – Robot configuration <span class="math notranslate nohighlight">\(q\)</span>.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></a></span></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Jacobian matrix <span class="math notranslate nohighlight">\(J\)</span>, expressed locally in the frame.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pink.tasks.frame_task.FrameTask.set_orientation_cost">
<span class="sig-name descname"><span class="pre">set_orientation_cost</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">orientation_cost</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pink.tasks.frame_task.FrameTask.set_orientation_cost" title="Link to this definition"></a></dt>
<dd><p>Set a new cost for all 3D orientation coordinates.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>orientation_cost</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></a>]</span>) – Contribution of orientation errors to the
normalized cost, in <span class="math notranslate nohighlight">\([\mathrm{cost}] / [\mathrm{rad}]\)</span>.
If this is a vector, the cost is anisotropic and each
coordinate corresponds to an axis of the frame.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pink.tasks.frame_task.FrameTask.set_position_cost">
<span class="sig-name descname"><span class="pre">set_position_cost</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">position_cost</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pink.tasks.frame_task.FrameTask.set_position_cost" title="Link to this definition"></a></dt>
<dd><p>Set a new cost for all 3D position coordinates.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>position_cost</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></a>]</span>) – Contribution of position errors to the normalized
cost, in <span class="math notranslate nohighlight">\([\mathrm{cost}] / [\mathrm{m}]\)</span>. If this is a
vector, the cost is anisotropic and each coordinate corresponds
to an axis of the frame.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pink.tasks.frame_task.FrameTask.set_target">
<span class="sig-name descname"><span class="pre">set_target</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transform_target_to_world</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pink.tasks.frame_task.FrameTask.set_target" title="Link to this definition"></a></dt>
<dd><p>Set task target pose in the world frame.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>transform_target_to_world</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">SE3</span></code></span>) – Transform from the task target frame to
the world frame.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pink.tasks.frame_task.FrameTask.set_target_from_configuration">
<span class="sig-name descname"><span class="pre">set_target_from_configuration</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">configuration</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pink.tasks.frame_task.FrameTask.set_target_from_configuration" title="Link to this definition"></a></dt>
<dd><p>Set task target pose from a robot configuration.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>configuration</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference internal" href="introduction.html#pink.configuration.Configuration" title="pink.configuration.Configuration"><code class="xref py py-class docutils literal notranslate"><span class="pre">Configuration</span></code></a></span>) – Robot configuration.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></span></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-pink.tasks.relative_frame_task">
<span id="relative-frame-task"></span><h2>Relative frame task<a class="headerlink" href="#module-pink.tasks.relative_frame_task" title="Link to this heading"></a></h2>
<p>Relative frame task implementation.</p>
<dl class="py class">
<dt class="sig sig-object py" id="pink.tasks.relative_frame_task.RelativeFrameTask">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pink.tasks.relative_frame_task.</span></span><span class="sig-name descname"><span class="pre">RelativeFrameTask</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">frame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">root</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">position_cost</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">orientation_cost</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lm_damping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gain</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pink.tasks.relative_frame_task.RelativeFrameTask" title="Link to this definition"></a></dt>
<dd><p>Regulate the pose of a robot frame relative to another robot frame.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="pink.tasks.relative_frame_task.RelativeFrameTask.frame">
<span class="sig-name descname"><span class="pre">frame</span></span><a class="headerlink" href="#pink.tasks.relative_frame_task.RelativeFrameTask.frame" title="Link to this definition"></a></dt>
<dd><p>Frame name, typically the name of a link or joint from the robot
description.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pink.tasks.relative_frame_task.RelativeFrameTask.root">
<span class="sig-name descname"><span class="pre">root</span></span><a class="headerlink" href="#pink.tasks.relative_frame_task.RelativeFrameTask.root" title="Link to this definition"></a></dt>
<dd><p>Name of the robot frame the task is relative to.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pink.tasks.relative_frame_task.RelativeFrameTask.transform_target_to_root">
<span class="sig-name descname"><span class="pre">transform_target_to_root</span></span><a class="headerlink" href="#pink.tasks.relative_frame_task.RelativeFrameTask.transform_target_to_root" title="Link to this definition"></a></dt>
<dd><p>Target pose of the frame.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pink.tasks.relative_frame_task.RelativeFrameTask.compute_error">
<span class="sig-name descname"><span class="pre">compute_error</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">configuration</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pink.tasks.relative_frame_task.RelativeFrameTask.compute_error" title="Link to this definition"></a></dt>
<dd><p>Compute the error twist.</p>
<p>The error is a twist <span class="math notranslate nohighlight">\(e(q) \in se(3)\)</span> expressed in the local
frame (i.e., it is a <em>body</em> twist). We map it to <span class="math notranslate nohighlight">\(\mathbb{R}^6\)</span>
following Pinocchio’s convention where linear coordinates are followed
by angular coordinates. The error vector is:</p>
<div class="math notranslate nohighlight">
\[e(q) := \log(T_{tf}) = \log(T_{rt}^{-1} T_{rf})\]</div>
<p>where <span class="math notranslate nohighlight">\(b\)</span> denotes our frame, <span class="math notranslate nohighlight">\(t\)</span> the target frame and
<span class="math notranslate nohighlight">\(0\)</span> the inertial frame. See also
<a class="reference internal" href="#pink.tasks.task.Task.compute_error" title="pink.tasks.task.Task.compute_error"><code class="xref py py-func docutils literal notranslate"><span class="pre">pink.tasks.task.Task.compute_error()</span></code></a> for more context.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>configuration</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference internal" href="introduction.html#pink.configuration.Configuration" title="pink.configuration.Configuration"><code class="xref py py-class docutils literal notranslate"><span class="pre">Configuration</span></code></a></span>) – Robot configuration <span class="math notranslate nohighlight">\(q\)</span>.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></a></span></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Frame task error <span class="math notranslate nohighlight">\(e(q)\)</span>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pink.tasks.relative_frame_task.RelativeFrameTask.compute_jacobian">
<span class="sig-name descname"><span class="pre">compute_jacobian</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">configuration</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pink.tasks.relative_frame_task.RelativeFrameTask.compute_jacobian" title="Link to this definition"></a></dt>
<dd><p>Compute the frame task Jacobian.</p>
<p>The task Jacobian <span class="math notranslate nohighlight">\(J(q) \in \mathbb{R}^{6 \times n_v}\)</span> is the
derivative of the task error <span class="math notranslate nohighlight">\(e(q) \in \mathbb{R}^6\)</span> with respect
to the configuration <span class="math notranslate nohighlight">\(q\)</span>. The formula for the frame task is:</p>
<div class="math notranslate nohighlight">
\[J(q) = \text{Jlog}(T_{tf}) (
    {}_f J_{0f}(q) - \text{Ad}_{T_{fr}}{}_r J_{0r}(q)
)\]</div>
<p>The proof is as follow if we denote <span class="math notranslate nohighlight">\(JT(q)\)</span> the Jacobian in the
local frame <span class="math notranslate nohighlight">\(T_{tf}(q) = T_{rt}^{-1} T_{0r}^{-1}(q) T_{0f}(q)\)</span>
we have</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{align}
J(q) = \text{Jlog}(T_{tf}) JT
[Jv]^{up} &amp; = T_{tf}^{-1} \dot{T}_{tf} \\
    &amp; = T_{ft}T_{tr}T_{r0}\dot{T}_{0f}
    - T_{ft}T_{tr}T_{0r}^{-1}\dot{T}_{0r}T_{0r}^{-1}T_{0f}
    \\
    &amp; = T_{0f}^{-1}\dot{T}_{0f}
    - T_{fr}(T_{0r}^{-1}\dot{T}_{0r})T_{fr}^{-1} \\
    &amp; = [{}_f J_{0f} v - \text{Ad}_{T_{fr}}{}_r J_{0r} v]^{up} \\
J(q) &amp; = {}_f J_{0f} - \text{Ad}_{T_{fr}}{}_r J_{0r}
\end{align}\end{split}\]</div>
<p>The formula implemented here is more general than the one detailed in
<a class="reference internal" href="references.html#frametaskjacobian" id="id5"><span>[FrameTaskJacobian]</span></a>. See also
<a class="reference internal" href="#pink.tasks.task.Task.compute_jacobian" title="pink.tasks.task.Task.compute_jacobian"><code class="xref py py-func docutils literal notranslate"><span class="pre">pink.tasks.task.Task.compute_jacobian()</span></code></a> for more context on task
Jacobians.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>configuration</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference internal" href="introduction.html#pink.configuration.Configuration" title="pink.configuration.Configuration"><code class="xref py py-class docutils literal notranslate"><span class="pre">Configuration</span></code></a></span>) – Robot configuration <span class="math notranslate nohighlight">\(q\)</span>.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></a></span></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Jacobian matrix <span class="math notranslate nohighlight">\(J\)</span>, expressed locally in the frame.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pink.tasks.relative_frame_task.RelativeFrameTask.set_orientation_cost">
<span class="sig-name descname"><span class="pre">set_orientation_cost</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">orientation_cost</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pink.tasks.relative_frame_task.RelativeFrameTask.set_orientation_cost" title="Link to this definition"></a></dt>
<dd><p>Set a new cost for all 3D orientation coordinates.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>orientation_cost</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></a>]</span>) – Contribution of orientation errors to the
normalized cost, in <span class="math notranslate nohighlight">\([\mathrm{cost}] / [\mathrm{rad}]\)</span>.
If this is a vector, the cost is anisotropic and each
coordinate corresponds to an axis of the frame.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pink.tasks.relative_frame_task.RelativeFrameTask.set_position_cost">
<span class="sig-name descname"><span class="pre">set_position_cost</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">position_cost</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pink.tasks.relative_frame_task.RelativeFrameTask.set_position_cost" title="Link to this definition"></a></dt>
<dd><p>Set a new cost for all 3D position coordinates.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>position_cost</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code>[<code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code>], <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></a>]</span>) – Contribution of position errors to the normalized
cost, in <span class="math notranslate nohighlight">\([\mathrm{cost}] / [\mathrm{m}]\)</span>. If this is a
vector, the cost is anisotropic and each coordinate corresponds
to an axis of the frame.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pink.tasks.relative_frame_task.RelativeFrameTask.set_target">
<span class="sig-name descname"><span class="pre">set_target</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transform_target_to_root</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pink.tasks.relative_frame_task.RelativeFrameTask.set_target" title="Link to this definition"></a></dt>
<dd><p>Set task target pose in the root frame.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>transform_target_to_root</strong> (<span class="sphinx_autodoc_typehints-type"><code class="xref py py-class docutils literal notranslate"><span class="pre">SE3</span></code></span>) – Affine transform matrix (4×4) from the
task target frame to the root frame.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pink.tasks.relative_frame_task.RelativeFrameTask.set_target_from_configuration">
<span class="sig-name descname"><span class="pre">set_target_from_configuration</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">configuration</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pink.tasks.relative_frame_task.RelativeFrameTask.set_target_from_configuration" title="Link to this definition"></a></dt>
<dd><p>Set task target pose from a robot configuration.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>configuration</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference internal" href="introduction.html#pink.configuration.Configuration" title="pink.configuration.Configuration"><code class="xref py py-class docutils literal notranslate"><span class="pre">Configuration</span></code></a></span>) – Robot configuration.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></span></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-pink.tasks.joint_coupling_task">
<span id="joint-coupling-task"></span><h2>Joint coupling task<a class="headerlink" href="#module-pink.tasks.joint_coupling_task" title="Link to this heading"></a></h2>
<p>Joint coupling task implementation.</p>
<dl class="py class">
<dt class="sig sig-object py" id="pink.tasks.joint_coupling_task.JointCouplingTask">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pink.tasks.joint_coupling_task.</span></span><span class="sig-name descname"><span class="pre">JointCouplingTask</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">joint_names</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ratios</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cost</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">configuration</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lm_damping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gain</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pink.tasks.joint_coupling_task.JointCouplingTask" title="Link to this definition"></a></dt>
<dd><p>Coupling between two revolute joints.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This task only considers a 1-Dimensional task.</p>
</div>
</dd></dl>

</section>
<section id="module-pink.tasks.linear_holonomic_task">
<span id="linear-holonomic-task"></span><h2>Linear holonomic task<a class="headerlink" href="#module-pink.tasks.linear_holonomic_task" title="Link to this heading"></a></h2>
<p>Linear holonomic task <span class="math notranslate nohighlight">\(A (q \ominus q_0) = b\)</span>.</p>
<dl class="py class">
<dt class="sig sig-object py" id="pink.tasks.linear_holonomic_task.LinearHolonomicTask">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pink.tasks.linear_holonomic_task.</span></span><span class="sig-name descname"><span class="pre">LinearHolonomicTask</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">A</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">b</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q_0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cost</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lm_damping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gain</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pink.tasks.linear_holonomic_task.LinearHolonomicTask" title="Link to this definition"></a></dt>
<dd><p>Linear holonomic task <span class="math notranslate nohighlight">\(A (q \ominus q_0) = b\)</span>.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="pink.tasks.linear_holonomic_task.LinearHolonomicTask.A">
<span class="sig-name descname"><span class="pre">A</span></span><a class="headerlink" href="#pink.tasks.linear_holonomic_task.LinearHolonomicTask.A" title="Link to this definition"></a></dt>
<dd><p>Matrix that defines the task:</p>
\begin{align}
e(q) & = A (q \ominus^\ell q_0) - b \\
\dot{e}(q) & := A \dot{q}
\end{align}<p>where <span class="math notranslate nohighlight">\(e(q) \in \mathbb{R}^{k}\)</span> is the quantity that the task
aims to drive to zero (<span class="math notranslate nohighlight">\(k\)</span> is the dimension of the task).</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pink.tasks.linear_holonomic_task.LinearHolonomicTask.b">
<span class="sig-name descname"><span class="pre">b</span></span><a class="headerlink" href="#pink.tasks.linear_holonomic_task.LinearHolonomicTask.b" title="Link to this definition"></a></dt>
<dd><p>Vector that defines the affine part of the task</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pink.tasks.linear_holonomic_task.LinearHolonomicTask.q_0">
<span class="sig-name descname"><span class="pre">q_0</span></span><a class="headerlink" href="#pink.tasks.linear_holonomic_task.LinearHolonomicTask.q_0" title="Link to this definition"></a></dt>
<dd><p>Element for which we work in the Lie algebra. If set to None, it
will use the neutral configuration of the robot.</p>
</dd></dl>

<p class="rubric">Notes</p>
<p>To be fully explicit, our quantities in the task equation <span class="math notranslate nohighlight">\(e(q) =
A (q \ominus^\ell q_0) - b\)</span> belong to the following sets:</p>
<blockquote>
<div>\begin{align}
e(q) & \in \mathbb{R}^p &
A & \in \mathcal{L}(\mathfrak{g}^\ell_{q_0}, \mathbb{R}^p) &
b & \in \mathbb{R}^p
\end{align}</div></blockquote>
<p>where <span class="math notranslate nohighlight">\(\mathfrak{g}^\ell_{q_0}\)</span> is the Lie algebra associated
with the Lie group <span class="math notranslate nohighlight">\(\mathcal{C}\)</span> (our configuration space), taken
in the local frame (<span class="math notranslate nohighlight">\(\ell\)</span>, <em>a.k.a.</em> body frame) at the reference
configuration <span class="math notranslate nohighlight">\(q_0\)</span>.</p>
<p>We take the <em>local</em> difference <span class="math notranslate nohighlight">\(q \ominus^\ell q_0\)</span> between our
configurations <span class="math notranslate nohighlight">\(q \in \mathcal{C}\)</span> and <span class="math notranslate nohighlight">\(q_0 \in
\mathcal{C}\)</span>, which is an element of the local Lie algebra in
<span class="math notranslate nohighlight">\(\mathfrak{g}^\ell_{q_0}\)</span> at <span class="math notranslate nohighlight">\(q_0\)</span>. In Pinocchio the
convention is to use local differences, unless specified otherwise
(e.g. world-aligned frames). It should not be confused with the general
Lie difference <span class="math notranslate nohighlight">\(\ominus\)</span> (that one is never used in practice),
nor the spatial difference <span class="math notranslate nohighlight">\(\ominus^s\)</span>, which is an element of
the spatial Lie algebra <span class="math notranslate nohighlight">\(\mathfrak{g}^s_{q_0}\)</span> associated with
<span class="math notranslate nohighlight">\(q_0\)</span>:</p>
<blockquote>
<div>\begin{align}
q \ominus q_0 & \in \mathcal{T}_{q_0} \mathcal{C} \\
q \ominus^\ell q_0 & \in \mathfrak{g}^\ell_{q_0} \\
q \ominus^s q_0 & \in \mathfrak{g}^s_{q_0}
\end{align}</div></blockquote>
<p>On a side note, here’s a look at the dimensions of these elements:</p>
<blockquote>
<div>\begin{align}
\mathrm{dim}(q) = \mathrm{dim}(q_0) = n_q \\
\mathrm{dim}(q \ominus q_0) = n_q \\
\mathrm{dim}(q \ominus^\ell q_0)
= \mathrm{dim}(q \ominus^s q_0)
= n_v
\end{align}</div></blockquote>
<p>Finally, we derive the Jacobian of our error <span class="math notranslate nohighlight">\(e(q)\)</span> as follows,
denoting by <span class="math notranslate nohighlight">\(a = \log(q_0^{-1} q)\)</span> so that <span class="math notranslate nohighlight">\(q \ominus^\ell
q_0 = \log(a)\)</span>:</p>
<blockquote>
<div>\begin{align}
\left.\frac{\partial e(q)}{\partial q} \right|_{\ell}
= A \left. \frac{\partial \log}{\partial q}
\right|_{\ell}^{\ell} \left.
\frac{\partial a}{\partial q} \right|_{\ell} = A \left.
\frac{\partial \log}{\partial q}
\right|_{\ell}
\end{align}</div></blockquote>
<p>By virtue of the identity <span class="math notranslate nohighlight">\(\left.{}^\ell \frac{\partial
a}{\partial q}\right|_{\ell} = I_{\mathfrak{g}}\)</span>. (See Yann de
Mont-Marin’s future blog for details :p)</p>
<dl class="py method">
<dt class="sig sig-object py" id="pink.tasks.linear_holonomic_task.LinearHolonomicTask.compute_error">
<span class="sig-name descname"><span class="pre">compute_error</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">configuration</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pink.tasks.linear_holonomic_task.LinearHolonomicTask.compute_error" title="Link to this definition"></a></dt>
<dd><p>Compute the task error function.</p>
<p>The error function <span class="math notranslate nohighlight">\(e(q) \in \mathbb{R}^{p}\)</span> is the quantity that
the task aims to drive to zero (<span class="math notranslate nohighlight">\(p\)</span> is the dimension of the
task). See the documentation of
<a class="reference internal" href="#pink.tasks.task.Task.compute_error" title="pink.tasks.task.Task.compute_error"><code class="xref py py-func docutils literal notranslate"><span class="pre">pink.tasks.task.Task.compute_error()</span></code></a> for details.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>configuration</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference internal" href="introduction.html#pink.configuration.Configuration" title="pink.configuration.Configuration"><code class="xref py py-class docutils literal notranslate"><span class="pre">Configuration</span></code></a></span>) – Robot configuration <span class="math notranslate nohighlight">\(q\)</span>.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></a></span></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Task error vector <span class="math notranslate nohighlight">\(e(q)\)</span>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pink.tasks.linear_holonomic_task.LinearHolonomicTask.compute_jacobian">
<span class="sig-name descname"><span class="pre">compute_jacobian</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">configuration</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pink.tasks.linear_holonomic_task.LinearHolonomicTask.compute_jacobian" title="Link to this definition"></a></dt>
<dd><p>Compute the task Jacobian at a given configuration.</p>
<p>See the documentation of <a class="reference internal" href="#pink.tasks.task.Task.compute_jacobian" title="pink.tasks.task.Task.compute_jacobian"><code class="xref py py-func docutils literal notranslate"><span class="pre">pink.tasks.task.Task.compute_jacobian()</span></code></a>
for details on the task Jacobian.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>configuration</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference internal" href="introduction.html#pink.configuration.Configuration" title="pink.configuration.Configuration"><code class="xref py py-class docutils literal notranslate"><span class="pre">Configuration</span></code></a></span>) – Robot configuration <span class="math notranslate nohighlight">\(q\)</span>.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></a></span></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Task Jacobian <span class="math notranslate nohighlight">\(J(q)\)</span>.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-pink.tasks.posture_task">
<span id="posture-task"></span><h2>Posture task<a class="headerlink" href="#module-pink.tasks.posture_task" title="Link to this heading"></a></h2>
<p>Posture task implementation.</p>
<dl class="py class">
<dt class="sig sig-object py" id="pink.tasks.posture_task.PostureTask">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pink.tasks.posture_task.</span></span><span class="sig-name descname"><span class="pre">PostureTask</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cost</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lm_damping</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gain</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pink.tasks.posture_task.PostureTask" title="Link to this definition"></a></dt>
<dd><p>Regulate joint angles to a desired posture.</p>
<p>A posture is a vector of actuated joint angles. Floating base coordinates
are not affected by this task.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="pink.tasks.posture_task.PostureTask.target_q">
<span class="sig-name descname"><span class="pre">target_q</span></span><a class="headerlink" href="#pink.tasks.posture_task.PostureTask.target_q" title="Link to this definition"></a></dt>
<dd><p>Target vector in the configuration space.</p>
</dd></dl>

<p>A posture task is typically used for regularization as it has a steady
rank. For instance, when Upkie’s legs are stretched and the Jacobian of its
contact frames become singular, the posture task will drive the knees
toward a preferred orientation.</p>
<dl class="py method">
<dt class="sig sig-object py" id="pink.tasks.posture_task.PostureTask.compute_error">
<span class="sig-name descname"><span class="pre">compute_error</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">configuration</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pink.tasks.posture_task.PostureTask.compute_error" title="Link to this definition"></a></dt>
<dd><p>Compute posture task error.</p>
<p>The posture task error is defined as:</p>
<div class="math notranslate nohighlight">
\[e(q) = q^* \ominus q\]</div>
<p>See <a class="reference internal" href="#pink.tasks.task.Task.compute_error" title="pink.tasks.task.Task.compute_error"><code class="xref py py-func docutils literal notranslate"><span class="pre">pink.tasks.task.Task.compute_error()</span></code></a> for more context.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>configuration</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference internal" href="introduction.html#pink.configuration.Configuration" title="pink.configuration.Configuration"><code class="xref py py-class docutils literal notranslate"><span class="pre">Configuration</span></code></a></span>) – Robot configuration <span class="math notranslate nohighlight">\(q\)</span>.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></a></span></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Posture task error <span class="math notranslate nohighlight">\(e(q)\)</span>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pink.tasks.posture_task.PostureTask.compute_jacobian">
<span class="sig-name descname"><span class="pre">compute_jacobian</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">configuration</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pink.tasks.posture_task.PostureTask.compute_jacobian" title="Link to this definition"></a></dt>
<dd><p>Compute the posture task Jacobian.</p>
<p>The task Jacobian is the identity <span class="math notranslate nohighlight">\(I_{n_v} \in \mathbb{R}^{n_v
\times n_v}\)</span>, with <span class="math notranslate nohighlight">\(n_v\)</span> the dimension of the robot’s tangent
space, so that the task dynamics are:</p>
<div class="math notranslate nohighlight">
\[J(q) \Delta q = \Delta q = \alpha (q^* \ominus q)\]</div>
<p>See <a class="reference internal" href="#pink.tasks.task.Task.compute_jacobian" title="pink.tasks.task.Task.compute_jacobian"><code class="xref py py-func docutils literal notranslate"><span class="pre">pink.tasks.task.Task.compute_jacobian()</span></code></a> for more context.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>configuration</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference internal" href="introduction.html#pink.configuration.Configuration" title="pink.configuration.Configuration"><code class="xref py py-class docutils literal notranslate"><span class="pre">Configuration</span></code></a></span>) – Robot configuration <span class="math notranslate nohighlight">\(q\)</span>.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></a></span></p>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Posture task Jacobian <span class="math notranslate nohighlight">\(J(q)\)</span>.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pink.tasks.posture_task.PostureTask.set_target">
<span class="sig-name descname"><span class="pre">set_target</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">target_q</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pink.tasks.posture_task.PostureTask.set_target" title="Link to this definition"></a></dt>
<dd><p>Set target posture.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>target_q</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v2.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndarray</span></code></a></span>) – Target vector in the configuration space.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pink.tasks.posture_task.PostureTask.set_target_from_configuration">
<span class="sig-name descname"><span class="pre">set_target_from_configuration</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">configuration</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pink.tasks.posture_task.PostureTask.set_target_from_configuration" title="Link to this definition"></a></dt>
<dd><p>Set target posture from a robot configuration.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>configuration</strong> (<span class="sphinx_autodoc_typehints-type"><a class="reference internal" href="introduction.html#pink.configuration.Configuration" title="pink.configuration.Configuration"><code class="xref py py-class docutils literal notranslate"><span class="pre">Configuration</span></code></a></span>) – Robot configuration.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></span></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="introduction.html" class="btn btn-neutral float-left" title="Introduction" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="limits.html" class="btn btn-neutral float-right" title="Limits" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022 Stéphane Caron..</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>